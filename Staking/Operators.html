<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Operators - Cardano Community managed Documentation for Pool Operators</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Home.html">Getting Started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../architecture.html">Architecture</a></li><li class="chapter-item expanded "><a href="../Common.html">Common</a></li><li class="chapter-item expanded "><a href="../build-and-run.html">Build and Run</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Build/node-cli.html">Node and CLI</a></li><li class="chapter-item expanded "><a href="../Build/wallet.html">Wallet</a></li><li class="chapter-item expanded "><a href="../Build/rest.html">REST</a></li><li class="chapter-item expanded "><a href="../Build/dbsync.html">DBSync tool</a></li><li class="chapter-item expanded "><a href="../Build/graphql.html">GraphQL</a></li></ol></li><li class="chapter-item expanded "><a href="../Setup-Node.html">Set up node as pool operator</a></li><li class="chapter-item expanded "><a href="../cli-scripts.html">Useful Scripts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Scripts/cntools.html">CNTools</a></li><li class="chapter-item expanded "><a href="../Scripts/createAddr.html">Create Keys/Address</a></li><li class="chapter-item expanded "><a href="../Scripts/sendADA.html">Make Transactions</a></li></ol></li><li class="chapter-item expanded "><a href="../Staking/Main.html">Guide to the Staking</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Staking/Keys.html">Keys</a></li><li class="chapter-item expanded "><a href="../Staking/Addresses.html">Addresses</a></li><li class="chapter-item expanded "><a href="../Staking/Certificates.html">Certificates</a></li><li class="chapter-item expanded "><a href="../Staking/StakeHolders.html">StakeHolders</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Staking/Owners.html">Owners</a></li><li class="chapter-item expanded "><a href="../Staking/Operators.html" class="active">Operators</a></li><li class="chapter-item "><a href="../Staking/Delegates.html">Delegates</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../Home.html">Appendix</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Appendix/monitoring.html">Monitoring using Prometheus and Grafana</a></li><li class="chapter-item expanded "><a href="../Appendix/postgres.html">Sample Postgres Setup</a></li><li class="chapter-item expanded "><a href="../Appendix/Setup-Node-Genesis.html">Set up node as BFT member defined in Genesis</a></li></ol></li><li class="chapter-item expanded "><a href="../Contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">Cardano Community managed Documentation for Pool Operators</h1>

                    <div class="right-buttons">
                        
                        <a href="https://github.com/cardano-community/guild-operators/blob/master/docs/Staking/Operators.md" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h3><a class="header" href="#operators" id="operators">Operators</a></h3>
<p>The operator(s) is/are the stake holder(s) who operating a pools. The operators can define their operational costs in the pool certificate, that can be deducted from the rewards.</p>
<p>The objectives are the following:</p>
<ul>
<li>Understand <strong>off-chain</strong> <code>operational key certificates</code>,</li>
<li>the required keys and addresses,
<ul>
<li><code>payment key(s)</code> for generating <code>base</code> payment addresses,</li>
<li><code>stake key(s)</code> for generating  <strong>pool</strong> <code>reward address(es)</code>,</li>
</ul>
</li>
<li>the stake address registration process <strong>with</strong> <code>key deposit</code> and</li>
<li>the stake pool registration procedure /w pledge and other params.</li>
</ul>
<p>Detailed steps are:</p>
<ul>
<li>Run a node with an <code>operational key certificate</code></li>
<li>Create stake key registration certificate for registering the operator's stake key (<code>staking.key</code>) on the chain, then</li>
<li>Create a pool registration certificate for the node to became a stake pool (<code>pool.cert</code>),</li>
<li>Create a delegation certificate for the owner (operator in our exercise) to delegate its stake as pledge to the newly creating pool (<code>deleg.cert</code>).</li>
<li>Sends the <strong>on-chain</strong> certificates to the blockchain in one or more transactions.</li>
</ul>
<h4><a class="header" href="#run-a-node-with-operational-key-certificate" id="run-a-node-with-operational-key-certificate">Run a node with Operational Key Certificate</a></h4>
<p>The operational key certificates use an <strong>operational key</strong> (cold) key to grant the right to sign blocks to another key (KES) that will expire after some epochs, that is based on the genesis parameters. </p>
<p>It uses a similar mechanism to the <code>forward secure signature scheme</code> where the signing key (KES) changes over time period and the end of each time period a new signing key is computed for the next peried and the old one is erased. </p>
<p>The mechanism used for running a node with <code>operational key certificates</code> are the following: </p>
<ol>
<li>KES (Key Evolving Signatures) that creates new (hot) KES keys periodically from the cold key
<ul>
<li>Create the cold (offline) key pair,</li>
<li>Create the hot KES key pairs (periodically), for signing blocks.</li>
<li>Create the <code>operational key certificate</code></li>
</ul>
</li>
<li>Generate VRF key pair for leader selection (lottery).</li>
<li>Run stake pool that is using the</li>
</ol>
<ul>
<li>non expired Operational certificate</li>
<li>non expired KES (hot) signing key</li>
<li>VRF signing key</li>
</ul>
<p>Before the old hot (KES) key pair is expiring, a new <code>operational key certificate</code> needs to be created by using a newly generated hot (KES) key pair and the <strong>off-line</strong> cold signing key.</p>
<p>In production environment, it is expected that the cold key is generated by some seed generation mechanism (BIP39 or similar) and stored on computer that does not have access to the Internet and when the time arrives, the operational certificates with the hot (KES) key pairs are transferred, by some mechanism (USB stick, air gapped QR etc.) to the stake pool.</p>
<pre><code class="language-bash"># 1.1 Create cold key pair
##########################################
pushd  /opt/cardano/fnf &amp;&amp; mkdir -p ~/cold-keys &amp;&amp; pushd ~/cold-keys || exit 127

# Generate the cold offline key pair
cardano-cli shelley node key-gen \
    --verification-key-file cold.vkey \
    --signing-key-file cold.skey \
    --operational-certificate-issue-counter cold.counter
popd

# 1.2 Generate a new hot KES keypair 
cardano-cli shelley node key-gen-KES --verification-key-file priv/kes.vkey --signing-key-file priv/kes.skey

# 1.3 Generate the ops cert based on 
# - the `cold signing key`
# - the hot KES key and
# - the cold key's counter
# New periodic cert is based on the new hot KES key.
# kes-period tells how long the ops cert therefrore the hot KES keys are valid
#
cardano-cli shelley node issue-op-cert \
    --cold-signing-key-file ~/cold-keys/cold.skey \
    --operational-certificate-issue-counter ~/cold-keys/cold.counter \
    --hot-kes-verification-key-file priv/kes.vkey \
    --kes-period 0 \
    --out-file priv/op.cert

# 2. Generate VRF key pair for leader selection
#########################################################
cardano-cli shelley node key-gen-VRF --verification-key-file priv/vrf.vkey --signing-key-file priv/vrf.skey

# 3. Run node /w these new keys generated
#########################################################

cardano-node run \
  --config                          files/config.json \
  --topology                        files/topology.json \
  --database-path                   db \
  --socket-path                     sockets/nodes.socket \
  --shelley-kes-key                 priv/kes.skey \
  --shelley-vrf-key                 priv/vrf.skey \
  --shelley-operational-certificate priv/op.cert \
  --port                            6000 

</code></pre>
<p>I will use the initial genesis address as input for registering the:</p>
<ul>
<li>delegate registration certificate and</li>
<li>pool registration certificate</li>
</ul>
<blockquote>
<p>Keep in mind the operator also need to have its stake key registered onn the chain.</p>
</blockquote>
<h4><a class="header" href="#create-stake-key-registration-certificate" id="create-stake-key-registration-certificate">Create stake key registration certificate</a></h4>
<p>First we need to create the operator's key in order to register the key on the chain.</p>
<p>The delegate's <code>staking key</code> needs to be registered on the blockchain in order to participating in staking, which just need a simple transaction using any <code>payment address</code>.</p>
<blockquote>
<p>This is the pool operators's stake key, and not the delegate's one. 
Therefore I prefixed them it differently i.e. <code>staking</code>, to distuinguish between the delegate's (<code>stake</code>) prefix.</p>
</blockquote>
<pre><code class="language-bash">mkdir operator &amp;&amp; pushd operator

# Generate the operator's stake keys
cardano-cli shelley stake-address key-gen --verification-key-file staking.vkey --signing-key-file staking.skey

# crate teh reward (staking) address from the operator's stake keys
cardano-cli shelley stake-address build --stake-verification-key-file staking.vkey &gt; staking.addr

# Generate the operator's payment keys
cardano-cli shelley address key-gen --verification-key-file op_pay.vkey --signing-key-file op_pay.skey

# Generate an `enterprise` address for the operator.
cardano-cli shelley address build --payment-verification-key-file op_pay.vkey &gt; op_pay.addr

# Generate the base address  i.e. compount `enterprise || reward` address
cardano-cli shelley address build \
    --payment-verification-key-file op_pay.vkey \
    --stake-verification-key-file staking.vkey \
    &gt; base.addr
</code></pre>
<p>The next step is creating a stake address registration certificate.</p>
<p>For registering an <code>stake key</code> on the chain a <code>key deposit1</code> fee must be paid. The amount can be optained from the genesis for the params file e.g.:</p>
<pre><code class="language-bash">grep keyDep ../params.json
    &quot;keyDeposit&quot;: 400000,
</code></pre>
<p>Generate the operator's stake key registration certificate </p>
<p>Keep, in mind that the a <code>key registration certificates</code> needs a deposit (<strong>keyDeposit</strong> in genesis) for the costs of tracking the key and the corresponding reward account. Also, it does not require any witness to register the certificate, but only the witness for the fees from the input of the transaction.</p>
<pre><code class="language-bash"># Keep in mind that this certificates needs a `keyDeposit` specified in the genesis.
cardano-cli shelley stake-address registration-certificate \
    --stake-verification-key-file staking.vkey \
    --out-file staking.cert
# The certificate contains the `blake2b-256` hash of the stake verifying key

# Calculate the min fee for the following outputs:
# 1. the base address that will contain the funds for pledge
# 2. And the change address.
# Keep in mind just one signing key is required, the paying signing key,
# as stake key reg cert does not need t obe witnessed
cardano-cli shelley transaction calculate-min-fee \
    --tx-in-count 1 \
    --tx-out-count 2 \
    --ttl 500000 \
    --testnet-magic 42 \
    --signing-key-file /opt/cardano/fnf/addresses/genesis.skey \
    --certificate-file staking.cert \
    --protocol-params-file params.json
# 
# runTxCalculateMinFee: 174169

# INPUT will be based on the genesis addres (FROM)
# but any pay address is fine.
FROM=&quot;617190446876aed298ee207c6b5a335e832e2169a060b8167ef3ba9caff6fa3393&quot;

cardano-cli shelley query utxo --testnet-magic 42 --address &quot;$FROM&quot;
#                           TxHash                                 TxIx        Lovelace
#----------------------------------------------------------------------------------------
#c85b72ee021915f5a8349209db54a51334ad9dfcec2f0fa2619a707556017bb3     0      499999825831

INPUT=&quot;c85b72ee021915f5a8349209db54a51334ad9dfcec2f0fa2619a707556017bb3#0&quot;
BALANCE=499999825831
# The amount will be 400K and I will pladge all of it to the pool
AMOUNT=400000000000
KEYDEP=400000
FEE=174169
CHANGE=&quot;$FROM+$(( 499999825831 - $FEE - $KEYDEP - $AMOUNT ))&quot;


# So, I used the genesis UtxO to move to some staking (group) address and 500K back to it.
cardano-cli shelley transaction build-raw \
    --tx-in &quot;$INPUT&quot; \
    --tx-out $(cat base.addr)+$AMOUNT \
    --tx-out &quot;$CHANGE&quot; \
    --ttl 500000 \
    --fee &quot;$FEE&quot; \
    --out-file staking-cert.tx \
    --certificate-file staking.cert

# Sign it
cardano-cli shelley transaction sign \
    --tx-body-file staking-cert.tx \
    --signing-key-file /opt/cardano/fnf/addresses/genesis.skey \
    --testnet-magic 42 \
    --out-file signed-staking-cert.tx

# Submit it
cardano-cli shelley transaction submit \
    --tx-file signed-staking-cert.tx \
    --testnet-magic 42
</code></pre>
<h4><a class="header" href="#create-a-pool-registration--certificate" id="create-a-pool-registration--certificate">Create a pool registration  certificate</a></h4>
<p>A node needs a <code>pool certificate</code> registered on the blockchain for the operator to became a stake pool (<code>pool.cert</code>),</p>
<p>Now we have a 400K on the operator's <code>base address</code> and the stake key (<code>staking.key</code>) is registered.</p>
<pre><code class="language-bash">cardano-cli shelley query utxo --testnet-magic 42 --address $(cat base.addr)
                           TxHash                                 TxIx        Lovelace
----------------------------------------------------------------------------------------
863506d0e7d1afcdb558ac4b021f2e7746f3c3178faecd11e1f0349ded141a74     0      400000000000
</code></pre>
<p>In the operator's PoV, for registering a pool, the pool certificate must contain:</p>
<ul>
<li>a <code>node operational verifying key</code> a.k.a. <code>cold key</code>, for generating the pool id.</li>
<li>the <code>VRF verifyig key</code> a.k.a <code>hot key</code>, for lottery, to prove that the node has the right to create and sign a block,</li>
<li>an operator <code>stake verifying keys</code> for generating the reward address, where the pool rewards would be sent and</li>
<li>owner's <code>stake verifying keys</code> generating the pledge <code>staking</code> address, that has enough fund for pledging.</li>
</ul>
<blockquote>
<p>Note: the <code>reward account verification key</code> and the <code>owner staking verification key</code> can be the same is, see below example, if the operator is the owner too.</p>
</blockquote>
<p>Also, for registering a pool certificate a <code>pool deposit</code> must be paid too.</p>
<pre><code class="language-bash"># Createing a pools cert with
# - 400K of the owner's (operator in this example) 400K pledge, 
# - 1k as cost /w 
# - 5% margin
cardano-cli shelley stake-pool registration-certificate \
    --cold-verification-key-file ~/cold-keys/pool.vkey \
    --vrf-verification-key-file /opt/cardano/fnf/priv/vrf.vkey \
    --pool-pledge 400000000000 \
    --pool-cost 1000000000 \
    --pool-margin 0.05 \
    --reward-account-verification-key-file staking.vkey \
    --pool-owner-staking-verification-key staking.vkey \
    --out-file pool.cert
</code></pre>
<h4><a class="header" href="#create-the-stake-owners-delegation-certificate" id="create-the-stake-owners-delegation-certificate">Create (the stake owner's) delegation certificate</a></h4>
<p>For <strong>pledging</strong>, the owner (in our example the operator) must create a <code>stake delegation certificate</code> for delegating at least a <code>pledge</code> amount of stake from the owner's <code>staking key</code> specified in the pool certificate.</p>
<p>In simple words, the owner is delegating its funds (<code>pledge</code>) to the pool he/she owns.</p>
<pre><code class="language-bash">cardano-cli shelley stake-address delegation-certificate \
    --stake-verification-key-file staking.vkey \
    --cold-verification-key-file ~/cold-keys/pool.vkey \
    --out-file owner-delegation.cert
</code></pre>
<h4><a class="header" href="#submit-the-certificate-to-the-chain" id="submit-the-certificate-to-the-chain">Submit the certificate to the chain</a></h4>
<p>The certificates can be sent in one transaction.</p>
<blockquote>
<p>Please, keep in mind that the registering a pool the operator's must pay a (decaying) <code>pool deposit</code> fee.</p>
</blockquote>
<pre><code># grep -i poolDeposit params.json
#  &quot;poolDeposit&quot;: 500000000,
# or 
# cardano-cli shelley query  protocol-parameters --testnet-magic 42 | jq '.poolDeposit'
# 500000000


# Calculate the fee for sending the both certificates the
# - pool registration certificate and the
# - owner's (in our case the operator's) delegating certificate.
#
# Also, it will be paid by my genesis key, but any valid `payment` signing key would do that 
# has the fee and the deposit
cardano-cli shelley transaction calculate-min-fee \
    --tx-in-count 1 \
    --tx-out-count 1 \
    --ttl 500000 \
    --testnet-magic 42 \
    --signing-key-file /opt/cardano/fnf/addresses/genesis.skey \
    --signing-key-file staking.skey \
    --signing-key-file ~/cold-keys/pool.skey \
    --certificate-file pool.cert \
    --certificate-file owner-delegation.cert \
    --protocol-params-file ../params.json
# runTxCalculateMinFee: 184377

FEE=184377
POOLDEP=500000000

cardano-cli shelley query utxo --testnet-magic 42 --address &quot;$FROM&quot;
#                           TxHash                                 TxIx        Lovelace
#----------------------------------------------------------------------------------------
#863506d0e7d1afcdb558ac4b021f2e7746f3c3178faecd11e1f0349ded141a74     1       99999251662

BALANCE=99999251662
INPUT=&quot;863506d0e7d1afcdb558ac4b021f2e7746f3c3178faecd11e1f0349ded141a74#1&quot;
CHANGE=&quot;$FROM+$(( $BALANCE - $FEE - $POOLDEP ))&quot;

# Build
cardano-cli shelley transaction build-raw \
     --tx-in &quot;$INPUT&quot; \
     --tx-out &quot;$CHANGE&quot; \
     --ttl 500000 \
     --fee &quot;$FEE&quot; \
     --out-file pool-cert.tx \
     --certificate-file pool.cert \
     --certificate-file owner-delegation.cert 

# Sign
# - the `genesis.skey` needs for signing the payment from the $FROM address.
# - the `staking.skey` needs for signing the owner's delegation certificate.
# - the `pool.skey` needs for signing the pool's registration certificate.
cardano-cli shelley transaction sign \
    --tx-body-file pool-cert.tx \
    --signing-key-file /opt/cardano/fnf/addresses/genesis.skey \
    --signing-key-file staking.skey \
    --signing-key-file ~/cold-keys/pool.skey \
    --testnet-magic 42 \
    --out-file signed-pool-cert.tx

# Submit:
cardano-cli shelley transaction submit \
    --tx-file signed-pool-cert.tx \
    --testnet-magic 42

</code></pre>
<p>Done your pool is registered.</p>
<p>To check it you can you the following command:</p>
<pre><code class="language-bash"># Get the Pool Id whihc is in the owner-delegation.cert
POOL_ID=$( tail -1 owner-delegation.cert | cut -c 6- )
echo $POOL_ID
# 5820d07e860c52860d92373893b27d6926e6610c925f905eba40d8e930004bf2dc44
shelley query ledger-state  --testnet-magic 42 | grep &quot;poolPubKey&quot; | grep  &quot;$POOL_ID&quot;
#                    &quot;_poolPubKey&quot;: &quot;d07e860c52860d92373893b27d6926e6610c925f905eba40d8e930004bf2dc44&quot;,
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../Staking/Owners.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../Staking/Delegates.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../Staking/Owners.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../Staking/Delegates.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        
        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
