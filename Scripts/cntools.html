<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CNTools - Cardano Community managed Documentation for Pool Operators</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../Home.html">Getting Started</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../architecture.html">Architecture</a></li><li class="chapter-item expanded "><a href="../Common.html">Common</a></li><li class="chapter-item expanded "><a href="../build-and-run.html">Build and Run</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Build/node-cli.html">Node and CLI</a></li><li class="chapter-item expanded "><a href="../Build/wallet.html">Wallet</a></li><li class="chapter-item expanded "><a href="../Build/rest.html">REST</a></li><li class="chapter-item expanded "><a href="../Build/dbsync.html">DBSync tool</a></li><li class="chapter-item expanded "><a href="../Build/graphql.html">GraphQL</a></li></ol></li><li class="chapter-item expanded "><a href="../Setup-Node.html">Set up node as pool operator</a></li><li class="chapter-item expanded "><a href="../cli-scripts.html">Useful Scripts</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Scripts/cntools.html" class="active">CNTools</a></li><li class="chapter-item expanded "><a href="../Scripts/createAddr.html">Create Keys/Address</a></li><li class="chapter-item expanded "><a href="../Scripts/sendADA.html">Make Transactions</a></li><li class="chapter-item expanded "><a href="../Scripts/topologyupdater.html">topology Updater</a></li></ol></li><li class="chapter-item expanded "><a href="../Staking/Main.html">Guide to the Staking</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Staking/Keys.html">Keys</a></li><li class="chapter-item expanded "><a href="../Staking/Addresses.html">Addresses</a></li><li class="chapter-item expanded "><a href="../Staking/Certificates.html">Certificates</a></li><li class="chapter-item expanded "><a href="../Staking/StakeHolders.html">StakeHolders</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Staking/Owners.html">Owners</a></li><li class="chapter-item "><a href="../Staking/Operators.html">Operators</a></li><li class="chapter-item "><a href="../Staking/Delegates.html">Delegates</a></li></ol></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../Home.html">Appendix</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Appendix/monitoring.html">Monitoring using Prometheus and Grafana</a></li><li class="chapter-item expanded "><a href="../Appendix/postgres.html">Sample Postgres Setup</a></li><li class="chapter-item expanded "><a href="../Appendix/Setup-Node-Genesis.html">Set up node as BFT member defined in Genesis</a></li></ol></li><li class="chapter-item expanded "><a href="../Contributors.html">Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">Cardano Community managed Documentation for Pool Operators</h1>

                    <div class="right-buttons">
                        
                        <a href="https://github.com/cardano-community/guild-operators/blob/master/docs/Scripts/cntools.md" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#quickstart-for-using-cntools" id="quickstart-for-using-cntools">Quickstart for using CNTOOLS</a></h1>
<p>CNTOOLS is a shell script that will simplify typical operations used in FF and HTN testnets.  We have developed this for our own use, and as such tend to follow some well worn paths when using it.  See below for simple step by step guide for getting a pool setup on the FF network.  Please note that this tool is tested on linux platforms only at this point.
The script assumes the <a href="../Common.html#dependencies-and-folder-structure-setup">Pre-Requisites</a> have already been run.</p>
<h4><a class="header" href="#download-and-configuration-cntoolssh" id="download-and-configuration-cntoolssh">Download and Configuration cntools.sh</a></h4>
<p>If you have run <code>prereqs.sh</code>, this should already be available in your scripts folder and make this step unnecessary. </p>
<p>CNTOOLS connects to your node through the configuration in the env file located in the same directory as the script.  Customize this file for your needs.  CNTOOLS will start even if you node is offline, but don't expect to get very far.</p>
<p>To download cntools manually you can execute the commands below:</p>
<pre><code class="language-bash">cd $CNODE_HOME/scripts
curl -s -o cntools.sh https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cntools.sh
curl -s -o cntools.config https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cntools.config
curl -s -o cntools.library https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/cntools.library
curl -s -o env https://raw.githubusercontent.com/cardano-community/guild-operators/master/scripts/cnode-helper-scripts/env
chmod 750 cntools.sh
chmod 640 cntools.config cntools.library env 
</code></pre>
<h4><a class="header" href="#start" id="start">Start</a></h4>
<p>Insure the tool is executable and start it with:</p>
<pre><code>$ ./cntools.sh
</code></pre>
<p>You should get a screen that looks something like this:</p>
<pre><code> &gt;&gt; CNTOOLS &lt;&lt;                                       A Guild Operators collaboration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 Main Menu

 ) Wallet  -  create, show, remove and protect wallets
 ) Funds   -  send and delegate ADA
 ) Pool    -  pool creation and management
 ) Update  -  install or upgrade latest available binary of Haskell Cardano
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 What would you like to do?

  [w] Wallet
  [f] Funds
  [p] Pool
  [u] Update
  [q] Quit
</code></pre>
<h1><a class="header" href="#step-by-step-to-create-a-pool-with-cntools" id="step-by-step-to-create-a-pool-with-cntools">Step by Step to create a pool with CNTOOLS</a></h1>
<ol>
<li>Choose <strong>Wallet</strong> [w] and you will be presented with the following menu:</li>
</ol>
<pre><code> &gt;&gt; WALLET
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 Wallet Management

 ) New      -  create a new payment wallet or upgrade existing to a stake wallet
 ) List     -  list all available wallets in a compact view
 ) Show     -  show detailed view of a specific wallet
 ) Remove   -  remove a wallet
 ) Decrypt  -  remove write protection and decrypt wallet
 ) Encrypt  -  encrypt wallet keys and make all files immutable
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 Select wallet operation

  [n] New
  [l] List
  [s] Show
  [r] Remove
  [d] Decrypt
  [e] Encrypt
  [h] Home
</code></pre>
<ol start="2">
<li>Choose <strong>New</strong> [n] to go to submenu for creating a new wallet</li>
</ol>
<pre><code> &gt;&gt; WALLET &gt;&gt; NEW
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 Wallet Type

 ) Payment  -  First step for a new wallet
               A payment wallet can send and receive funds but not delegate/pledge.

 ) Stake    -  Upgrade existing payment wallet to a stake wallet
               Make sure there are funds available in payment wallet before upgrade
               as this is needed to pay for the stake wallet registration fee.
               A stake wallet is needed to be able to delegate and pledge to a pool.
               All funds from payment address will be moved to base address.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 Choose wallet type

  [p] Payment
  [s] Stake
  [h] Home
</code></pre>
<ol start="3">
<li>Choose <strong>Payment</strong> [p] type of wallet</li>
<li>Give the wallet a name</li>
<li>CNTOOLS will give you your payment address.  For example:</li>
</ol>
<pre><code> &gt;&gt; WALLET &gt;&gt; NEW &gt;&gt; PAYMENT
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Name of new wallet: bob

New Wallet: bob
Payment Address: 60f8a4bed2e379cf8ee5aa28bb7b227362b38694368b767b270720760503132fc5
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre>
<ol start="6">
<li><strong>Send some money to this wallet.</strong>  Either through the faucet or have a friend send you some.  IMPORTANT...  The wallet must have funds in it before you can proceed.</li>
<li>From the main menu choose <strong>Wallet &gt;&gt; New</strong> and then this time choose <strong>Stake</strong> [s] to upgrade your wallet</li>
<li>CNTOOLS will give you a list of wallets you can upgrade.  Choose the wallet you created in step 4.  In this example case that wallet is called <strong>bob</strong>.   This will send a transaction to the blockchain to upgrade your wallet to a staking wallet. The result should look something like this:</li>
</ol>
<pre><code>New block was created - 23386
New Stake Wallet : bob
Payment Address  : 60f8a4bed2e379cf8ee5aa28bb7b227362b38694368b767b270720760503132fc5
Payment Balance  : 0 ADA
Base Address     : 00f8a4bed2e379cf8ee5aa28bb7b227362b38694368b767b270720760503132fc545bdb48005781a47a864347843654fd58c1363695453697b5b59fd7ca2af3dc8
Base Balance     : 99.428691 ADA
Reward Address   : 5821e045bdb48005781a47a864347843654fd58c1363695453697b5b59fd7ca2af3dc8
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre>
<p>The total balance is 0 for the payment address because ALL funds have been moved to the base address.</p>
<ol start="9">
<li>From the main menu select <strong>Pool</strong> [p]</li>
</ol>
<pre><code> &gt;&gt; POOL
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 Pool Management

 ) New       -  create a new pool
 ) Register  -  register created pool on chain using a stake wallet (pledge wallet)
 ) Modify    -  change pool parameters and register updated pool values on chain
 ) List      -  a compact list view of available local pools
 ) Show      -  detailed view of specified pool
 ) Rotate    -  rotate pool KES keys
 ) Decrypt   -  remove write protection and decrypt pool
 ) Encrypt   -  encrypt pool cold keys and make all files immutable
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 Select wallet operation

  [n] New
  [r] Register
  [m] Modify
  [l] List
  [s] Show
  [o] Rotate
  [d] Decrypt
  [e] Encrypt
  [h] Home
</code></pre>
<ol start="10">
<li>Select <strong>New</strong> [n] to create a new pool</li>
<li>Give the pool a name. In our case we call it LOVE.  The result should look something like this:</li>
</ol>
<pre><code> &gt;&gt; POOL &gt;&gt; NEW
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Pool Name: LOVE

Pool: LOVE
PoolPubKey: 687c3f588d996ee5fc751cc581826f63c407b1c46514ef9fe3001fa96d3a75bc
Start cardano node with the following run arguments:
--shelley-kes-key /opt/cardano/cnode/priv/pool/LOVE/hot.skey
--shelley-vrf-key /opt/cardano/cnode/priv/pool/LOVE/vrf.skey
--shelley-operational-certificate /opt/cardano/cnode/priv/pool/LOVE/op.cert
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre>
<ol start="12">
<li>Start or restart your cardano-node with the parameters as shown.  This will insure your node has all the information necessary to create blocks.<br />
<strong>IMPORTANT</strong>.  If you do not start your node with these parameters you won't be able to make blocks.</li>
<li>From the main menu select <strong>pool</strong> [p]</li>
<li>Select <strong>Register</strong> [r]</li>
<li>Select the pool you just created in step 11 above</li>
<li>CNTOOLS will give you prompts to set pledge, margin and cost.  Enter values that are useful to you.  Make sure you set your pledge low enough to insure your funds in your wallet will cover pledge plus pool registration fees.  It will look something like this:</li>
</ol>
<pre><code>Pledge (in ADA, default: 50000): 899
Margin (in %, default: 7): 10
Cost (in ADA, default: 256): 500
</code></pre>
<ol start="17">
<li>Select the wallet you want to register the pool with.</li>
<li>DONE!  The output should look something like this:</li>
</ol>
<pre><code>New block was created - 23414

--- Balance Check Source Address -------------------------------------------------------
                           TxHash                                 TxIx        Lovelace
----------------------------------------------------------------------------------------
3caee84b8e5deaaa4482763b5322aa209fb3c16adc0fe80fc35640787c3d2423     0         599242070

Total balance is 599.24207 ADA

Pool LOVE successfully registered using wallet bob for pledge
Pledge : 899 ADA
Margin : 10%
Cost   : 500 ADA
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../cli-scripts.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../Scripts/createAddr.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../cli-scripts.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../Scripts/createAddr.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
